<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPAP Room Guide - Studio D</title>
    <link rel="icon" type="image/png" href="images/nyu-logo.png">
    <link rel="apple-touch-icon" href="images/nyu-logo.png">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="js/background.js"></script>
    <script src="js/lightbox.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <img src="images/nyu-logo.svg" alt="NYU Logo" class="nyu-logo">
                <h1>MPAP Room Guides</h1>
            </div>
        </header>

        <a href="index.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to Room List
        </a>

        <main>
            <h1>Studio D</h1>
            
            <div class="main-menu-selector">
                <button id="sound-tab" class="mode-button" onclick="showSection('sound')"><i class="fas fa-volume-up"></i> Sound</button>
                <button id="video-tab" class="mode-button active" onclick="showSection('video')"><i class="fas fa-eye"></i> Video</button>
            </div>

            <section class="step" id="sound-setup-section" style="display:none;">
                <div class="mode-selector">
                    <button class="mode-button active" onclick="toggleMode('room-pc-sound', this)">
                        <i class="fas fa-desktop"></i> Room PC
                    </button>
                </div>

                <div id="room-pc-sound" class="mode-section active">
                    <h2><i class="fas fa-volume-up"></i> Audio</h2>
                    <div class="mode-content">
                        <div class="step-by-step-container" data-section="room-pc-sound">
                            <!-- Step 1 -->
                            <div class="instruction-step active" data-step="1">
                                <div class="step-content text-only">
                                    <p class="step-text">Select <strong>HDX</strong> as the audio device.</p>
                                </div>
                            </div>

                            <!-- Step 2 -->
                            <div class="instruction-step" data-step="2">
                                <div class="step-content text-only">
                                    <p class="step-text">Select <strong>Speaker</strong>.</p>
                                </div>
                            </div>

                            <!-- Step 3 -->
                            <div class="instruction-step" data-step="3">
                                <div class="step-content text-only">
                                    <p class="step-text">Turn up the <strong>volume knob</strong>.</p>
                                </div>
                            </div>

                            <!-- Navigation Controls -->
                            <div class="step-navigation">
                                <button class="step-btn prev-btn circular-nav-btn" onclick="previousStep('room-pc-sound')" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                
                                <!-- Step Progress Indicator -->
                                <div class="step-progress">
                                    <div class="step-dots">
                                        <div class="step-dot active" data-step="1"></div>
                                        <div class="step-dot" data-step="2"></div>
                                        <div class="step-dot" data-step="3"></div>
                                    </div>
                                </div>
                                
                                <button class="step-btn next-btn circular-nav-btn" onclick="nextStep('room-pc-sound')">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="step" id="video-projection-section">
                <div class="mode-selector">
                    <button class="mode-button active" onclick="toggleMode('room-pc-video', this)">
                        <i class="fas fa-desktop"></i> Room PC
                    </button>
                    <button class="mode-button" onclick="toggleMode('laptop-video', this)">
                        <i class="fas fa-laptop"></i> Laptop
                    </button>
                </div>

                <div id="room-pc-video" class="mode-section active">
                    <h2><i class="fas fa-desktop"></i> Room PC Video</h2>
                    <div class="mode-content">
                        <div class="step-by-step-container" data-section="room-pc-video">
                            <!-- Step 1 -->
                            <div class="instruction-step active" data-step="1">
                                <div class="step-content">
                                    
                                    <p class="step-text"><strong>Red:</strong> The main desk, access to studio Mac, and video related utilities. Remote will be placed on the desk, studio Mac can be found under the desk. The HDMI adapter is on the rack down the desk. The HDMI source switcher is on the desk.</p>
                                    <p class="step-text"><strong>Green:</strong> This small right section of the console will provide buttons and knobs for straightforward audio setup if audio playback is needed. The headphone audio jack can be found near this area.</p>
                                    <img src="images/studios/Studio D/d_room_view.jpg" alt="Studio D Opening View" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Step 2 -->
                            <div class="instruction-step" data-step="2">
                                <div class="step-content">
                                    <p class="step-text">If the Mac is off, turn it on from under the desk.</p>
                                    <img src="images/studio-d-pc.jpg" alt="Studio D Mac Power Switch" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Step 3 -->
                            <div class="instruction-step" data-step="3">
                                <div class="step-content">
                                    <p class="step-text">Ensure <strong>Desktop</strong> is selected on the HDMI Switcher.</p>
                                    <img src="images/studio-d-hdmi-switcher.jpg" alt="Studio D HDMI Switcher" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Navigation Controls -->
                            <div class="step-navigation">
                                <button class="step-btn prev-btn circular-nav-btn" onclick="previousStep('room-pc-video')" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                
                                <!-- Step Progress Indicator -->
                                <div class="step-progress">
                                    <div class="step-dots">
                                        <div class="step-dot active" data-step="1"></div>
                                        <div class="step-dot" data-step="2"></div>
                                        <div class="step-dot" data-step="3"></div>
                                    </div>
                                </div>
                                
                                <button class="step-btn next-btn circular-nav-btn" onclick="nextStep('room-pc-video')">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="laptop-video" class="mode-section">
                    <h2><i class="fas fa-laptop"></i> Laptop Video</h2>
                    <div class="mode-content">
                        <div class="step-by-step-container" data-section="laptop-video">
                            <!-- Step 1 -->
                            <div class="instruction-step active" data-step="1">
                                <div class="step-content">
                                    <p class="step-text"><strong>Red:</strong> Main desk with studio Mac, remote, HDMI adapter on rack, and source switcher</p>
                                    <p class="step-text"><strong>Green:</strong> Audio controls and headphone jack</p>
                                    <img src="images/studio-d1.jpg" alt="Studio D Opening View" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Step 2 -->
                            <div class="instruction-step" data-step="2">
                                <div class="step-content">
                                    <p class="step-text">If the Mac is off, turn it on from under the desk.</p>
                                    <img src="images/studio-d-pc.jpg" alt="Studio D Mac Power Switch" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Step 3 -->
                            <div class="instruction-step" data-step="3">
                                <div class="step-content">
                                    <p class="step-text">Ensure <strong>Laptop</strong> is selected on the HDMI Switcher.</p>
                                    <img src="images/studio-d-hdmi-switcher.jpg" alt="Studio D HDMI Switcher" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Step 4 -->
                            <div class="instruction-step" data-step="4">
                                <div class="step-content">
                                    <p class="step-text">[PLACEHOLDER: Additional laptop setup instructions]</p>
                                    <img src="images/placeholder.jpg" alt="Studio D Laptop Setup" class="step-image">
                                </div>
                            </div>
                            
                            <!-- Navigation Controls -->
                            <div class="step-navigation">
                                <button class="step-btn prev-btn circular-nav-btn" onclick="previousStep('laptop-video')" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                
                                <!-- Step Progress Indicator -->
                                <div class="step-progress">
                                    <div class="step-dots">
                                        <div class="step-dot active" data-step="1"></div>
                                        <div class="step-dot" data-step="2"></div>
                                        <div class="step-dot" data-step="3"></div>
                                        <div class="step-dot" data-step="4"></div>
                                    </div>
                                </div>
                                
                                <button class="step-btn next-btn circular-nav-btn" onclick="nextStep('laptop-video')">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        function toggleMode(modeId, button) {
            const parentSection = button.closest('.step');
            parentSection.querySelectorAll('.mode-section').forEach(section => {
                section.classList.remove('active');
            });
            parentSection.querySelectorAll('.mode-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(modeId).classList.add('active');
            button.classList.add('active');
            
            // Reset all step containers in the newly activated section to step 1
            const newSection = document.getElementById(modeId);
            const stepContainers = newSection.querySelectorAll('.step-by-step-container');
            stepContainers.forEach(container => {
                // Hide all steps
                container.querySelectorAll('.instruction-step').forEach(step => {
                    step.classList.remove('active');
                });
                // Show step 1
                const firstStep = container.querySelector('[data-step="1"]');
                if (firstStep) {
                    firstStep.classList.add('active');
                }
                // Reset step counter and navigation buttons
                const totalSteps = container.querySelectorAll('.instruction-step').length;
                updateStepCounter(container, 1, totalSteps);
                updateNavigationButtons(container, 1, totalSteps);
            });
        }

        function showSection(section) {
            const soundSection = document.getElementById('sound-setup-section');
            const videoSection = document.getElementById('video-projection-section');
            const soundTab = document.getElementById('sound-tab');
            const videoTab = document.getElementById('video-tab');
            
            if (section === 'sound') {
                if (soundSection) soundSection.style.display = '';
                if (videoSection) videoSection.style.display = 'none';
                if (soundTab) soundTab.classList.add('active');
                if (videoTab) videoTab.classList.remove('active');
            } else {
                if (soundSection) soundSection.style.display = 'none';
                if (videoSection) videoSection.style.display = '';
                if (soundTab) soundTab.classList.remove('active');
                if (videoTab) videoTab.classList.add('active');
            }
        }

        // Default to Sound on load
        document.addEventListener('DOMContentLoaded', function() {
            showSection('sound');
            
            // Initialize navigation buttons for single-step scenarios
            initializeSingleStepNavigation();
        });
        
        function initializeSingleStepNavigation() {
            const containers = document.querySelectorAll('.step-by-step-container');
            containers.forEach(container => {
                const totalSteps = container.querySelectorAll('.instruction-step').length;
                if (totalSteps === 1) {
                    // For single-step scenarios, disable both buttons and show check mark
                    const prevBtn = container.querySelector('.prev-btn');
                    const nextBtn = container.querySelector('.next-btn');
                    
                    if (prevBtn) prevBtn.disabled = true;
                    if (nextBtn) {
                        nextBtn.innerHTML = '<i class="fas fa-check"></i>';
                        nextBtn.disabled = true;
                    }
                }
            });
        }

        // Step-by-Step Navigation Functions
        function nextStep(sectionId) {
            const container = document.querySelector(`[data-section="${sectionId}"]`);
            const currentStep = container.querySelector('.instruction-step.active');
            const currentStepNum = parseInt(currentStep.dataset.step);
            const totalSteps = container.querySelectorAll('.instruction-step').length;
            
            if (currentStepNum < totalSteps) {
                // Hide current step
                currentStep.classList.remove('active');
                
                // Show next step
                const nextStep = container.querySelector(`[data-step="${currentStepNum + 1}"]`);
                nextStep.classList.add('active');
                
                // Update progress counter
                updateStepCounter(container, currentStepNum + 1, totalSteps);
                
                // Update button states
                updateNavigationButtons(container, currentStepNum + 1, totalSteps);
            }
        }

        function previousStep(sectionId) {
            const container = document.querySelector(`[data-section="${sectionId}"]`);
            const currentStep = container.querySelector('.instruction-step.active');
            const currentStepNum = parseInt(currentStep.dataset.step);
            const totalSteps = container.querySelectorAll('.instruction-step').length;
            
            if (currentStepNum > 1) {
                // Hide current step
                currentStep.classList.remove('active');
                
                // Show previous step
                const prevStep = container.querySelector(`[data-step="${currentStepNum - 1}"]`);
                prevStep.classList.add('active');
                
                // Update progress counter
                updateStepCounter(container, currentStepNum - 1, totalSteps);
                
                // Update button states
                updateNavigationButtons(container, currentStepNum - 1, totalSteps);
            }
        }

                function updateStepCounter(container, currentStep, totalSteps) {
            // Update circular step indicators
            const stepDots = container.querySelectorAll('.step-dot');
            stepDots.forEach((dot, index) => {
                if (index === currentStep - 1) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function goToStep(sectionId, targetStep) {
            const container = document.querySelector(`[data-section="${sectionId}"]`);
            const currentStep = container.querySelector('.instruction-step.active');
            const totalSteps = container.querySelectorAll('.instruction-step').length;
            
            if (targetStep >= 1 && targetStep <= totalSteps) {
                // Hide current step
                currentStep.classList.remove('active');
                
                // Show target step
                const nextStep = container.querySelector(`[data-step="${targetStep}"]`);
                nextStep.classList.add('active');
                
                // Update progress counter
                updateStepCounter(container, targetStep, totalSteps);
                
                // Update button states
                updateNavigationButtons(container, targetStep, totalSteps);
            }
        }

        // Add click listeners to step dots
        document.addEventListener('DOMContentLoaded', function() {
            const stepDots = document.querySelectorAll('.step-dot');
            stepDots.forEach(dot => {
                dot.addEventListener('click', function() {
                    const targetStep = parseInt(this.dataset.step);
                    const container = this.closest('[data-section]');
                    const sectionId = container.dataset.section;
                    goToStep(sectionId, targetStep);
                });
            });
        });

        function updateNavigationButtons(container, currentStep, totalSteps) {
            const prevBtn = container.querySelector('.prev-btn');
            const nextBtn = container.querySelector('.next-btn');
            
            // Update Previous button
            prevBtn.disabled = currentStep === 1;
            
            // Update Next button
            if (currentStep === totalSteps) {
                nextBtn.innerHTML = '<i class="fas fa-check"></i>';
                nextBtn.disabled = true;
            } else {
                nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                nextBtn.disabled = false;
            }
        }
    </script>

    <script>
    // Cat toggle logic
    let catEnabled = false;
    let catScript = null;
    function toggleCat() {
        if (!catEnabled) {
            // Enable cat: dynamically load oneko.js
            catScript = document.createElement('script');
            catScript.src = 'js/oneko.js';
            catScript.dataset.cat = 'js/images/oneko.gif';
            document.body.appendChild(catScript);
            catEnabled = true;
        } else {
            // Disable cat: remove cat div and script
            const neko = document.getElementById('oneko');
            if (neko) neko.remove();
            if (catScript) catScript.remove();
            catScript = null;
            catEnabled = false;
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
        const logo = document.querySelector('.nyu-logo');
        if (logo) {
            logo.style.cursor = 'pointer';
            logo.title = 'Toggle Cat';
            logo.addEventListener('click', toggleCat);
        }
    });
    </script>
</body>
</html>
